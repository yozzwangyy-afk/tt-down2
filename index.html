<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TikTok Downloader</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body{
font-family:Arial,Helvetica,sans-serif;
background:#0a0a0f;
color:#fff;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
}
.box{
width:100%;
max-width:420px;
padding:24px;
background:rgba(255,255,255,.05);
border-radius:18px;
border:1px solid rgba(255,107,157,.3);
}
input,button{
width:100%;
padding:14px;
border-radius:14px;
border:none;
margin-top:12px;
font-size:1rem;
}
input{
background:#111;
color:#fff;
}
button{
background:linear-gradient(135deg,#ff6b9d,#ff9ad5);
color:#fff;
font-weight:700;
cursor:pointer;
}
button:active{transform:scale(.97)}
.log{
margin-top:12px;
font-size:.85rem;
opacity:.8;
}
</style>
</head>

<body>
<div class="box">
<h2>TikTok Downloader</h2>

<input id="url" placeholder="Tempel link TikTok di sini">

<button onclick="process()">Download</button>

<div class="log" id="log"></div>
</div>

<script>
async function process(){
  const url = document.getElementById("url").value.trim();
  const log = document.getElementById("log");

  if(!url || !url.includes("tiktok")){
    log.innerText = "Link TikTok tidak valid";
    return;
  }

  log.innerText = "Mengambil data...";

  try{
    const r = await fetch(
      "https://www.tikwm.com/api/?url=" + encodeURIComponent(url)
    );
    const j = await r.json();

    if(!j.data){
      log.innerText = "Gagal mengambil video";
      return;
    }

    // AUTO DOWNLOAD VIDEO HD
    const downloadUrl =
      "/api/download?url=" +
      encodeURIComponent(j.data.play) +
      "&filename=tiktok-video.mp4";

    const a = document.createElement("a");
    a.href = downloadUrl;
    a.download = "tiktok-video.mp4";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    log.innerText = "Download dimulai...";
  }catch(e){
    log.innerText = "Terjadi error";
  }
}

/* AUTO PASTE CLIPBOARD */
window.addEventListener("load", async ()=>{
  try{
    const t = await navigator.clipboard.readText();
    if(t.includes("tiktok")){
      document.getElementById("url").value = t;
    }
  }catch{}
});
</script>
</body>
</html>
